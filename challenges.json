[
    {
        "id": "py-medium-fill-01",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Inclusive range",
        "prompt": "Fill the blank so the loop runs 1..n (inclusive).",
        "hints": [
            "range end is exclusive.",
            "Usually use n + 1."
        ],
        "template": "def count_to(n):\n    for i in range(1, ______):\n        print(i)\n",
        "answer": "n + 1"
    },
    {
        "id": "py-medium-fill-02",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Safe dict access",
        "prompt": "Fill the blank so missing keys return 0.",
        "hints": [
            "Use dict.get.",
            "Pass a default value."
        ],
        "template": "def score(scores, name):\n    return scores.______(name, 0)\n",
        "answer": "get"
    },
    {
        "id": "py-medium-fill-03",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Strip whitespace",
        "prompt": "Fill the blank so strings of spaces count as blank.",
        "hints": [
            "Use strip() or whitespace removal.",
            "Compare to empty string."
        ],
        "template": "def is_blank(s):\n    return ______ == \"\"\n",
        "answer": "s.strip()"
    },
    {
        "id": "py-medium-fill-04",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Even check",
        "prompt": "Fill the blank so it returns True if x is even.",
        "hints": [
            "Even means remainder 0.",
            "Use % 2."
        ],
        "template": "def is_even(x):\n    return x % 2 ______ 0\n",
        "answer": "=="
    },
    {
        "id": "py-medium-fill-05",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Default to empty list safely",
        "prompt": "Fill the blank to avoid a mutable default argument bug.",
        "hints": [
            "Use None as the default.",
            "Create a list inside if None."
        ],
        "template": "def add_item(x, items=______):\n    if items is None:\n        items = []\n    items.append(x)\n    return items\n",
        "answer": "None"
    },
    {
        "id": "py-medium-fill-06",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Catching ValueError",
        "prompt": "Fill the blank so invalid ints return None instead of crashing.",
        "hints": [
            "int('abc') raises ValueError.",
            "Catch that exception."
        ],
        "template": "def to_int(s):\n    try:\n        return int(s)\n    except ______:\n        return None\n",
        "answer": "ValueError"
    },
    {
        "id": "py-medium-fill-07",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Join with commas",
        "prompt": "Fill the blank so it joins words with commas.",
        "hints": [
            "Use a string separator.",
            "Call .join(list_of_strings)."
        ],
        "template": "def csv_line(words):\n    return ______.join(words)\n",
        "answer": "\",\""
    },
    {
        "id": "py-medium-fill-08",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Copy a list (not alias)",
        "prompt": "Fill the blank so b is a copy of a (not the same object).",
        "hints": [
            "Slicing copy uses [:].",
            "list(a) also works."
        ],
        "template": "a = [1, 2, 3]\nb = a______\n",
        "answer": "[:]"
    },
    {
        "id": "py-medium-fill-09",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Dictionary comprehension value",
        "prompt": "Fill the blank to map x -> x*x for each x in nums.",
        "hints": [
            "Use x * x as the value.",
            "Inside {x: ... for x in nums}."
        ],
        "template": "def squares_map(nums):\n    return {x: ______ for x in nums}\n",
        "answer": "x * x"
    },
    {
        "id": "py-medium-fill-10",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "List comprehension filter",
        "prompt": "Fill the blank so it keeps only positives (not just truthy).",
        "hints": [
            "0 is falsy but not negative.",
            "Use > 0."
        ],
        "template": "def positives(nums):\n    return [n for n in nums if ______]\n",
        "answer": "n > 0"
    },
    {
        "id": "py-medium-fill-11",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Enumerate start",
        "prompt": "Fill the blank so the first index printed is 1, not 0.",
        "hints": [
            "enumerate has a start= parameter.",
            "start=1."
        ],
        "template": "def print_numbered(items):\n    for i, x in enumerate(items, start=______):\n        print(i, x)\n",
        "answer": "1"
    },
    {
        "id": "py-medium-fill-12",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Sort by length",
        "prompt": "Fill the blank so it sorts words by length.",
        "hints": [
            "sorted(..., key=...)",
            "len is a function."
        ],
        "template": "def sort_by_len(words):\n    return sorted(words, key=______)\n",
        "answer": "len"
    },
    {
        "id": "py-medium-fill-13",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Fallback on None",
        "prompt": "Fill the blank so it returns 0 when x is None, else returns x.",
        "hints": [
            "Use a conditional expression.",
            "x is None is the check."
        ],
        "template": "def none_to_zero(x):\n    return 0 if ______ else x\n",
        "answer": "x is None"
    },
    {
        "id": "py-medium-fill-14",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Set membership",
        "prompt": "Fill the blank so it checks membership efficiently.",
        "hints": [
            "Use a set for membership.",
            "Use 'in'."
        ],
        "template": "def contains_fast(values, x):\n    s = set(values)\n    return x ______ s\n",
        "answer": "in"
    },
    {
        "id": "py-medium-fill-15",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Get last element safely",
        "prompt": "Fill the blank so it returns the last element of a list.",
        "hints": [
            "Negative indexing.",
            "Last element is index -1."
        ],
        "template": "def last(xs):\n    return xs[______]\n",
        "answer": "-1"
    },
    {
        "id": "py-medium-fill-16",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Remove trailing newline",
        "prompt": "Fill the blank so it strips only the trailing newline if present.",
        "hints": [
            "rstrip can take chars.",
            "Use '\\n'."
        ],
        "template": "def chomp(line):\n    return line.rstrip(______)\n",
        "answer": "\"\\n\""
    },
    {
        "id": "py-medium-fill-17",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Zip two lists",
        "prompt": "Fill the blank so it pairs names with scores.",
        "hints": [
            "Use zip(a, b).",
            "Then convert to list if needed."
        ],
        "template": "def pair(names, scores):\n    return list(______(names, scores))\n",
        "answer": "zip"
    },
    {
        "id": "py-medium-fill-18",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Convert to int safely",
        "prompt": "Fill the blank so it converts s to int, or returns default if conversion fails.",
        "hints": [
            "Use try/except ValueError.",
            "Return default in except."
        ],
        "template": "def to_int_or(s, default):\n    try:\n        return int(s)\n    except ValueError:\n        return ______\n",
        "answer": "default"
    },
    {
        "id": "py-medium-fill-19",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Update dict count",
        "prompt": "Fill the blank so it counts word occurrences.",
        "hints": [
            "Use get with default 0.",
            "Then add 1."
        ],
        "template": "def count_words(words):\n    counts = {}\n    for w in words:\n        counts[w] = counts.get(w, 0) + ______\n    return counts\n",
        "answer": "1"
    },
    {
        "id": "py-medium-fill-20",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Slicing up to index",
        "prompt": "Fill the blank so it returns the first n elements.",
        "hints": [
            "Use slicing.",
            "xs[:n]."
        ],
        "template": "def first_n(xs, n):\n    return xs[______]\n",
        "answer": ":n"
    },
    {
        "id": "py-medium-fill-21",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Check key existence",
        "prompt": "Fill the blank so it returns True if key is in dict d.",
        "hints": [
            "Use 'in' with dict checks keys."
        ],
        "template": "def has_key(d, key):\n    return key ______ d\n",
        "answer": "in"
    },
    {
        "id": "py-medium-fill-22",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Make lower-case",
        "prompt": "Fill the blank so it returns a lower-case version of s.",
        "hints": [
            "Use a string method.",
            "lower() returns a new string."
        ],
        "template": "def lower(s):\n    return s.______()\n",
        "answer": "lower"
    },
    {
        "id": "py-medium-fill-23",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Guard division by zero",
        "prompt": "Fill the blank so it returns None when b is 0.",
        "hints": [
            "Check b == 0 first.",
            "Return None early."
        ],
        "template": "def safe_div(a, b):\n    if ______:\n        return None\n    return a / b\n",
        "answer": "b == 0"
    },
    {
        "id": "py-medium-fill-24",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Build a set comprehension",
        "prompt": "Fill the blank so it returns a set of squared values.",
        "hints": [
            "Use { ... } with a for-loop.",
            "Set comprehension."
        ],
        "template": "def square_set(nums):\n    return {______ for x in nums}\n",
        "answer": "x * x"
    },
    {
        "id": "py-medium-fill-25",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Short-circuit default",
        "prompt": "Fill the blank so it returns s if non-empty else \"(none)\".",
        "hints": [
            "Empty string is falsy.",
            "Use or."
        ],
        "template": "def fallback(s):\n    return s ______ \"(none)\"\n",
        "answer": "or"
    },
    {
        "id": "py-medium-fill-26",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Make an absolute value",
        "prompt": "Fill the blank so it returns absolute value of x.",
        "hints": [
            "Use built-in abs()."
        ],
        "template": "def abs_val(x):\n    return ______(x)\n",
        "answer": "abs"
    },
    {
        "id": "py-medium-fill-27",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Unpack tuple",
        "prompt": "Fill the blank so it unpacks (x, y) into two variables.",
        "hints": [
            "Tuple unpacking uses comma.",
            "a, b = tuple."
        ],
        "template": "p = (10, 20)\nx, y = ______\n",
        "answer": "p"
    },
    {
        "id": "py-medium-fill-28",
        "type": "fill_blank",
        "difficulty": "medium",
        "language": "py",
        "title": "Check string prefix",
        "prompt": "Fill the blank so it returns True if s starts with \"py\".",
        "hints": [
            "Use startswith.",
            "startswith takes a string prefix."
        ],
        "template": "def is_py(s):\n    return s.startswith(______)\n",
        "answer": "\"py\""
    },
    {
        "id": "py-hard-fix-01",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Off-by-one sum",
        "prompt": "Fix it so it returns the sum of 1..n inclusive.",
        "hints": [
            "range end is exclusive.",
            "Use n + 1."
        ],
        "broken": "def sum_to(n):\n    s = 0\n    for i in range(1, n):\n        s += i\n    return s\n",
        "expected": "def sum_to(n):\n    s = 0\n    for i in range(1, n + 1):\n        s += i\n    return s\n"
    },
    {
        "id": "py-hard-fix-02",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Mutable default argument",
        "prompt": "Fix the bug so each call starts with a fresh list unless a list is passed in.",
        "hints": [
            "Use None as default.",
            "Create a list inside."
        ],
        "broken": "def add_item(x, items=[]):\n    items.append(x)\n    return items\n",
        "expected": "def add_item(x, items=None):\n    if items is None:\n        items = []\n    items.append(x)\n    return items\n"
    },
    {
        "id": "py-hard-fix-03",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Missing return",
        "prompt": "Fix it so the function returns the list it builds.",
        "hints": [
            "You computed out.",
            "Return out at the end."
        ],
        "broken": "def squares(nums):\n    out = []\n    for n in nums:\n        out.append(n * n)\n",
        "expected": "def squares(nums):\n    out = []\n    for n in nums:\n        out.append(n * n)\n    return out\n"
    },
    {
        "id": "py-hard-fix-04",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Safe dict lookup",
        "prompt": "Fix it so missing keys return 0 instead of crashing.",
        "hints": [
            "Use dict.get.",
            "Provide default 0."
        ],
        "broken": "def points(scores, name):\n    return scores[name]\n",
        "expected": "def points(scores, name):\n    return scores.get(name, 0)\n"
    },
    {
        "id": "py-hard-fix-05",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "String + int concatenation",
        "prompt": "Fix it so it returns: \"Ada has 3 points\" even when pts is an int.",
        "hints": [
            "Use an f-string.",
            "Or convert pts to str."
        ],
        "broken": "def message(name, pts):\n    return name + \" has \" + pts + \" points\"\n",
        "expected": "def message(name, pts):\n    return f\"{name} has {pts} points\"\n"
    },
    {
        "id": "py-hard-fix-06",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Scope: UnboundLocalError",
        "prompt": "Fix it so it increments the global counter.",
        "hints": [
            "Assigning makes it local.",
            "Use global count."
        ],
        "broken": "count = 0\n\ndef bump():\n    count += 1\n    return count\n",
        "expected": "count = 0\n\ndef bump():\n    global count\n    count += 1\n    return count\n"
    },
    {
        "id": "py-hard-fix-07",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Truthiness bug in filter",
        "prompt": "Fix it so it keeps only positive numbers (not just truthy ones).",
        "hints": [
            "0 is falsy but not negative.",
            "Use n > 0."
        ],
        "broken": "def positives(nums):\n    return [n for n in nums if n]\n",
        "expected": "def positives(nums):\n    return [n for n in nums if n > 0]\n"
    },
    {
        "id": "py-hard-fix-08",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Handle invalid int",
        "prompt": "Fix it so invalid inputs return None instead of crashing.",
        "hints": [
            "Catch ValueError.",
            "Return None in except."
        ],
        "broken": "def safe_int(s):\n    return int(s)\n",
        "expected": "def safe_int(s):\n    try:\n        return int(s)\n    except ValueError:\n        return None\n"
    },
    {
        "id": "py-hard-fix-09",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Late binding in lambdas",
        "prompt": "Fix it so each function returns its own multiplier (2, 3, 4).",
        "hints": [
            "Default args capture the current value.",
            "i=i trick."
        ],
        "broken": "def make_funcs():\n    funcs = []\n    for i in [2, 3, 4]:\n        funcs.append(lambda x: x * i)\n    return funcs\n",
        "expected": "def make_funcs():\n    funcs = []\n    for i in [2, 3, 4]:\n        funcs.append(lambda x, i=i: x * i)\n    return funcs\n"
    },
    {
        "id": "py-hard-fix-10",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Wrong list sort call",
        "prompt": "Fix it so it returns a sorted list (ascending) without returning None.",
        "hints": [
            "list.sort() sorts in-place and returns None.",
            "Use sorted() or sort then return list."
        ],
        "broken": "def sorted_nums(nums):\n    return nums.sort()\n",
        "expected": "def sorted_nums(nums):\n    return sorted(nums)\n"
    },
    {
        "id": "py-hard-fix-11",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Shadowing built-in",
        "prompt": "Fix it so it correctly sums the list.",
        "hints": [
            "Don't name a variable sum.",
            "Use a different name."
        ],
        "broken": "def total(nums):\n    sum = 0\n    for n in nums:\n        sum += n\n    return sum\n",
        "expected": "def total(nums):\n    total_sum = 0\n    for n in nums:\n        total_sum += n\n    return total_sum\n"
    },
    {
        "id": "py-hard-fix-12",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Incorrect dict update",
        "prompt": "Fix it so it counts words correctly.",
        "hints": [
            "Use get with default 0.",
            "Then increment."
        ],
        "broken": "def count_words(words):\n    counts = {}\n    for w in words:\n        counts[w] += 1\n    return counts\n",
        "expected": "def count_words(words):\n    counts = {}\n    for w in words:\n        counts[w] = counts.get(w, 0) + 1\n    return counts\n"
    },
    {
        "id": "py-hard-fix-13",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Return inside loop",
        "prompt": "Fix it so it checks all elements and returns True if any is negative.",
        "hints": [
            "Don't return too early.",
            "Return after loop if not found."
        ],
        "broken": "def any_negative(nums):\n    for n in nums:\n        if n < 0:\n            return True\n        return False\n",
        "expected": "def any_negative(nums):\n    for n in nums:\n        if n < 0:\n            return True\n    return False\n"
    },
    {
        "id": "py-hard-fix-14",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Wrong condition order",
        "prompt": "Fix it so it doesn't crash when s is None.",
        "hints": [
            "Check None before calling methods.",
            "Short-circuit matters."
        ],
        "broken": "def is_blank(s):\n    return s.strip() == \"\" or s is None\n",
        "expected": "def is_blank(s):\n    return s is None or s.strip() == \"\"\n"
    },
    {
        "id": "py-hard-fix-15",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "IndexError on empty list",
        "prompt": "Fix it so it returns None for an empty list.",
        "hints": [
            "Check if list is empty.",
            "Return None early."
        ],
        "broken": "def last(xs):\n    return xs[-1]\n",
        "expected": "def last(xs):\n    if not xs:\n        return None\n    return xs[-1]\n"
    },
    {
        "id": "py-hard-fix-16",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Bad split usage",
        "prompt": "Fix it so it splits a CSV line into fields correctly.",
        "hints": [
            "split takes the separator string.",
            "Comma is ','."
        ],
        "broken": "def parse_csv(line):\n    return line.split()\n",
        "expected": "def parse_csv(line):\n    return line.split(\",\")\n"
    },
    {
        "id": "py-hard-fix-17",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Using is for equality",
        "prompt": "Fix it so it correctly checks value equality.",
        "hints": [
            "Use == for values.",
            "is checks identity."
        ],
        "broken": "def is_ten(x):\n    return x is 10\n",
        "expected": "def is_ten(x):\n    return x == 10\n"
    },
    {
        "id": "py-hard-fix-18",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Wrong argument to join",
        "prompt": "Fix it so it joins with a space between words.",
        "hints": [
            "Separator is the string before .join.",
            "The argument to join is iterable."
        ],
        "broken": "def sentence(words):\n    return words.join(\" \")\n",
        "expected": "def sentence(words):\n    return \" \".join(words)\n"
    },
    {
        "id": "py-hard-fix-19",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Comprehension variable mistake",
        "prompt": "Fix it so it returns squares of nums.",
        "hints": [
            "Use x from the loop.",
            "x * x."
        ],
        "broken": "def squares(nums):\n    return [n * n for x in nums]\n",
        "expected": "def squares(nums):\n    return [x * x for x in nums]\n"
    },
    {
        "id": "py-hard-fix-20",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Wrong unpack in loop",
        "prompt": "Fix it so it sums the values in a dict.",
        "hints": [
            "Iterating dict gives keys.",
            "Use .items() to get key,value."
        ],
        "broken": "def sum_values(d):\n    total = 0\n    for k, v in d:\n        total += v\n    return total\n",
        "expected": "def sum_values(d):\n    total = 0\n    for k, v in d.items():\n        total += v\n    return total\n"
    },
    {
        "id": "py-hard-fix-21",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Accidentally reusing accumulator",
        "prompt": "Fix it so it returns the product of nums (or 1 for empty list).",
        "hints": [
            "Product identity is 1.",
            "Multiply into accumulator."
        ],
        "broken": "def product(nums):\n    p = 0\n    for n in nums:\n        p *= n\n    return p\n",
        "expected": "def product(nums):\n    p = 1\n    for n in nums:\n        p *= n\n    return p\n"
    },
    {
        "id": "py-hard-fix-22",
        "type": "fix_code",
        "difficulty": "hard",
        "language": "py",
        "title": "Bad exception type",
        "prompt": "Fix it so it returns None when index is out of range.",
        "hints": [
            "Out of range is IndexError.",
            "Catch the right exception."
        ],
        "broken": "def get_at(xs, i):\n    try:\n        return xs[i]\n    except KeyError:\n        return None\n",
        "expected": "def get_at(xs, i):\n    try:\n        return xs[i]\n    except IndexError:\n        return None\n"
    }
]